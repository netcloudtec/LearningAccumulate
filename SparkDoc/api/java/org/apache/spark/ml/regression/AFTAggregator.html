<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_144) on Mon Sep 17 17:48:02 CST 2018 -->
<title>AFTAggregator (Spark 2.3.1 JavaDoc)</title>
<meta name="date" content="2018-09-17">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AFTAggregator (Spark 2.3.1 JavaDoc)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","所有方法"],2:["t2","实例方法"],8:["t4","具体方法"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>上一个类</li>
<li><a href="../../../../../org/apache/spark/ml/regression/AFTCostFun.html" title="org.apache.spark.ml.regression中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/spark/ml/regression/AFTAggregator.html" target="_top">框架</a></li>
<li><a href="AFTAggregator.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.spark.ml.regression</div>
<h2 title="类 AFTAggregator" class="title">类 AFTAggregator</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>Object</li>
<li>
<ul class="inheritance">
<li>org.apache.spark.ml.regression.AFTAggregator</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>所有已实现的接口:</dt>
<dd>java.io.Serializable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">AFTAggregator</span>
extends Object
implements scala.Serializable</pre>
<div class="block">AFTAggregator computes the gradient and loss for a AFT loss function,
 as used in AFT survival regression for samples in sparse or dense vector in an online fashion.
 <p>
 The loss function and likelihood function under the AFT model based on:
 Lawless, J. F., Statistical Models and Methods for Lifetime Data,
 New York: John Wiley &amp; Sons, Inc. 2003.
 <p>
 Two AFTAggregator can be merged together to have a summary of loss and gradient of
 the corresponding joint dataset.
 <p>
 Given the values of the covariates $x^{'}$, for random lifetime $t_{i}$ of subjects i = 1,..,n,
 with possible right-censoring, the likelihood function under the AFT model is given as
 <p>
 <blockquote>
    $$
    L(\beta,\sigma)=\prod_{i=1}^n[\frac{1}{\sigma}f_{0}
      (\frac{\log{t_{i}}-x^{'}\beta}{\sigma})]^{\delta_{i}}S_{0}
    (\frac{\log{t_{i}}-x^{'}\beta}{\sigma})^{1-\delta_{i}}
    $$
 </blockquote>
 <p>
 Where $\delta_{i}$ is the indicator of the event has occurred i.e. uncensored or not.
 Using $\epsilon_{i}=\frac{\log{t_{i}}-x^{'}\beta}{\sigma}$, the log-likelihood function
 assumes the form
 <p>
 <blockquote>
    $$
    \iota(\beta,\sigma)=\sum_{i=1}^{n}[-\delta_{i}\log\sigma+
    \delta_{i}\log{f_{0}}(\epsilon_{i})+(1-\delta_{i})\log{S_{0}(\epsilon_{i})}]
    $$
 </blockquote>
 Where $S_{0}(\epsilon_{i})$ is the baseline survivor function,
 and $f_{0}(\epsilon_{i})$ is corresponding density function.
 <p>
 The most commonly used log-linear survival regression method is based on the Weibull
 distribution of the survival time. The Weibull distribution for lifetime corresponding
 to extreme value distribution for log of the lifetime,
 and the $S_{0}(\epsilon)$ function is
 <p>
 <blockquote>
    $$
    S_{0}(\epsilon_{i})=\exp(-e^{\epsilon_{i}})
    $$
 </blockquote>
 <p>
 and the $f_{0}(\epsilon_{i})$ function is
 <p>
 <blockquote>
    $$
    f_{0}(\epsilon_{i})=e^{\epsilon_{i}}\exp(-e^{\epsilon_{i}})
    $$
 </blockquote>
 <p>
 The log-likelihood function for Weibull distribution of lifetime is
 <p>
 <blockquote>
    $$
    \iota(\beta,\sigma)=
    -\sum_{i=1}^n[\delta_{i}\log\sigma-\delta_{i}\epsilon_{i}+e^{\epsilon_{i}}]
    $$
 </blockquote>
 <p>
 Due to minimizing the negative log-likelihood equivalent to maximum a posteriori probability,
 the loss function we use to optimize is $-\iota(\beta,\sigma)$.
 The gradient functions for $\beta$ and $\log\sigma$ respectively are
 <p>
 <blockquote>
    $$
    \frac{\partial (-\iota)}{\partial \beta}=
    \sum_{1=1}^{n}[\delta_{i}-e^{\epsilon_{i}}]\frac{x_{i}}{\sigma} \\
 <p>
    \frac{\partial (-\iota)}{\partial (\log\sigma)}=
    \sum_{i=1}^{n}[\delta_{i}+(\delta_{i}-e^{\epsilon_{i}})\epsilon_{i}]
    $$
 </blockquote>
 <p>
 param:  bcParameters The broadcasted value includes three part: The log of scale parameter,
                     the intercept and regression coefficients corresponding to the features.
 param:  fitIntercept Whether to fit an intercept term.
 param:  bcFeaturesStd The broadcast standard deviation values of the features.</div>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../../serialized-form.html#org.apache.spark.ml.regression.AFTAggregator">序列化表格</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="构造器概要表, 列表构造器和解释">
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">构造器和说明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html#AFTAggregator-org.apache.spark.broadcast.Broadcast-boolean-org.apache.spark.broadcast.Broadcast-">AFTAggregator</a></span>(<a href="../../../../../org/apache/spark/broadcast/Broadcast.html" title="org.apache.spark.broadcast中的类">Broadcast</a>&lt;breeze.linalg.DenseVector&lt;Object&gt;&gt;&nbsp;bcParameters,
             boolean&nbsp;fitIntercept,
             <a href="../../../../../org/apache/spark/broadcast/Broadcast.html" title="org.apache.spark.broadcast中的类">Broadcast</a>&lt;double[]&gt;&nbsp;bcFeaturesStd)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>所有方法</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">实例方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">具体方法</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html" title="org.apache.spark.ml.regression中的类">AFTAggregator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html#add-org.apache.spark.ml.regression.AFTPoint-">add</a></span>(org.apache.spark.ml.regression.AFTPoint&nbsp;data)</code>
<div class="block">Add a new training data to this AFTAggregator, and update the loss and gradient
 of the objective function.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html#count--">count</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>breeze.linalg.DenseVector&lt;Object&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html#gradient--">gradient</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html#loss--">loss</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html" title="org.apache.spark.ml.regression中的类">AFTAggregator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html#merge-org.apache.spark.ml.regression.AFTAggregator-">merge</a></span>(<a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html" title="org.apache.spark.ml.regression中的类">AFTAggregator</a>&nbsp;other)</code>
<div class="block">Merge another AFTAggregator, and update the loss and gradient
 of the objective function.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a name="AFTAggregator-org.apache.spark.broadcast.Broadcast-boolean-org.apache.spark.broadcast.Broadcast-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AFTAggregator</h4>
<pre>public&nbsp;AFTAggregator(<a href="../../../../../org/apache/spark/broadcast/Broadcast.html" title="org.apache.spark.broadcast中的类">Broadcast</a>&lt;breeze.linalg.DenseVector&lt;Object&gt;&gt;&nbsp;bcParameters,
                     boolean&nbsp;fitIntercept,
                     <a href="../../../../../org/apache/spark/broadcast/Broadcast.html" title="org.apache.spark.broadcast中的类">Broadcast</a>&lt;double[]&gt;&nbsp;bcFeaturesStd)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="count--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>count</h4>
<pre>public&nbsp;long&nbsp;count()</pre>
</li>
</ul>
<a name="loss--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loss</h4>
<pre>public&nbsp;double&nbsp;loss()</pre>
</li>
</ul>
<a name="gradient--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gradient</h4>
<pre>public&nbsp;breeze.linalg.DenseVector&lt;Object&gt;&nbsp;gradient()</pre>
</li>
</ul>
<a name="add-org.apache.spark.ml.regression.AFTPoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html" title="org.apache.spark.ml.regression中的类">AFTAggregator</a>&nbsp;add(org.apache.spark.ml.regression.AFTPoint&nbsp;data)</pre>
<div class="block">Add a new training data to this AFTAggregator, and update the loss and gradient
 of the objective function.
 <p></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>data</code> - The AFTPoint representation for one data point to be added into this aggregator.</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>This AFTAggregator object.</dd>
</dl>
</li>
</ul>
<a name="merge-org.apache.spark.ml.regression.AFTAggregator-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>merge</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html" title="org.apache.spark.ml.regression中的类">AFTAggregator</a>&nbsp;merge(<a href="../../../../../org/apache/spark/ml/regression/AFTAggregator.html" title="org.apache.spark.ml.regression中的类">AFTAggregator</a>&nbsp;other)</pre>
<div class="block">Merge another AFTAggregator, and update the loss and gradient
 of the objective function.
 (Note that it's in place merging; as a result, <code>this</code> object will be modified.)
 <p></div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>other</code> - The other AFTAggregator to be merged.</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>This AFTAggregator object.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>上一个类</li>
<li><a href="../../../../../org/apache/spark/ml/regression/AFTCostFun.html" title="org.apache.spark.ml.regression中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/spark/ml/regression/AFTAggregator.html" target="_top">框架</a></li>
<li><a href="AFTAggregator.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<script defer="defer" type="text/javascript" src="../../../../../lib/jquery.js"></script><script defer="defer" type="text/javascript" src="../../../../../lib/api-javadocs.js"></script></body>
</html>
